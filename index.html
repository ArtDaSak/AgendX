<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-color" content="#091833" />
        <title>AgendX</title>

        <!-- Fuente t√≠tulos -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Iceland&display=swap" rel="stylesheet" />

        <!-- Favicon (se reemplaza din√°micamente en runtime con el gradiente) -->
        <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'/%3E" />

        <link rel="stylesheet" href="css/Style.css" />
    </head>

    <body>
        <header class="topBar">
            <div class="brand">
                <div class="brandMark" aria-hidden="true" title="AgendX">
                    <i data-lucide="calendar-range"></i>
                </div>

                <div class="brandText">
                    <div class="brandNameRow">
                        <h1 class="brandName">AgendX</h1>
                    </div>

                    <p class="brandTagline">Es tu d√≠a, ve a tu ritmo üòº</p>
                </div>
            </div>

            <div class="topBarActions" id="topBarActions">
                <button class="PrimaryBtn" id="OpenCreateBtn" type="button">+ Agregar</button>
            </div>
        </header>

        <main class="Main">
            <nav class="Tabs" aria-label="Vistas">
                <button class="TabBtn isActive" data-view="today" type="button">D√≠a</button>
                <button class="TabBtn" data-view="week" type="button">Semana</button>
                <button class="TabBtn" data-view="all" type="button">Todo</button>
            </nav>

            <section class="ActiveSession" id="ActiveSession"></section>

            <section class="Card" id="ListCard">
                <div class="CardHeader">
                    <h2 id="ListTitle">D√≠a</h2>

                    <div class="InlineControls">
                        <button class="GhostBtn" id="PrevBtn" type="button" aria-label="Anterior">‚Äπ</button>
                        <button class="GhostBtn" id="TodayBtn" type="button">Ir a hoy</button>
                        <button class="GhostBtn" id="NextBtn" type="button" aria-label="Siguiente">‚Ä∫</button>
                        <button class="PrimaryBtn" id="StartDayBtn" type="button">Iniciar d√≠a</button>
                    </div>
                </div>

                <div class="List" id="OccurrenceList" aria-live="polite"></div>
            </section>
        </main>

        <div class="Overlay" id="Overlay" hidden></div>

        <section class="Sheet" id="EventSheet" hidden aria-modal="true" role="dialog" aria-labelledby="EventSheetTitle">
            <header class="SheetHeader">
                <h3 id="EventSheetTitle">Agregar evento</h3>
                <button class="IconBtn" id="CloseEventSheetBtn" type="button" aria-label="Cerrar">‚úï</button>
            </header>

            <form class="SheetBody" id="EventForm">
                <input type="hidden" id="EventId" />

                <div class="Grid2">
                    <label class="Field">
                        <span>Tipo</span>
                        <select id="EventKind">
                            <option value="event">Evento</option>
                            <option value="rest">Descanso</option>
                        </select>
                    </label>

                    <label class="Field">
                        <span>Rango (prioridad)</span>
                        <input id="RangeOrderInput" type="number" min="1" step="1" value="10" required />
                    </label>
                </div>

                <div id="TitleWrap">
                    <label class="Field">
                        <span>T√≠tulo</span>
                        <input id="TitleInput" required maxlength="60" placeholder="Ej. Estudiar JavaScript" />
                    </label>
                </div>

                <label class="Field">
                    <span>Tiempo (min)</span>
                    <input id="DurationInput" type="number" min="0" step="5" placeholder="Ej. 45" />
                    <small>Se usa para el temporizador en tiempo real</small>
                </label>

                <div id="NotesWrap">
                    <label class="Field">
                        <span>Notas (Markdown)</span>
                        <textarea id="NotesInput" rows="2" maxlength="600" placeholder="- Lista&#10;**negrita**&#10;[link](https://...)"></textarea>
                    </label>
                </div>

                <div class="Grid2">
                    <label class="Field">
                        <span>Repetici√≥n</span>
                        <select id="RepeatType">
                            <option value="none">Ninguna</option>
                            <option value="daily">Diaria</option>
                            <option value="weekly">Semanal</option>
                            <option value="monthly">Mensual</option>
                            <option value="interval">Cada N d√≠as</option>
                            <option value="dates">Fechas espec√≠ficas</option>
                        </select>
                    </label>

                    <label class="Field">
                        <span>Inicia desde</span>
                        <input id="StartOnInput" type="date" />
                    </label>
                </div>

                <div class="RepeatConfig" id="RepeatConfig"></div>

                <div class="HintBox">
                    <strong>Regla de Descanso</strong>
                    <small>Si existe un evento NO diario en el mismo rango, el ‚ÄúDescanso‚Äù se elimina autom√°ticamente para ese d√≠a.</small>
                </div>

                <div class="SheetFooter">
                    <button class="DangerBtn" id="DeleteBtn" type="button" hidden>Eliminar</button>
                    <div class="Spacer"></div>
                    <button class="GhostBtn" id="CancelEventBtn" type="button">Cancelar</button>
                    <button class="PrimaryBtn" type="submit">Guardar</button>
                </div>
            </form>
        </section>

        <!-- Confirm Modal -->
        <div class="ModalOverlay" id="ConfirmOverlay" hidden></div>

        <section class="Modal" id="ConfirmModal" hidden role="dialog" aria-modal="true" aria-labelledby="ConfirmTitle">
            <header class="ModalHeader">
                <h3 id="ConfirmTitle">Confirmaci√≥n</h3>
                <button class="IconBtn" id="ConfirmCloseBtn" type="button" aria-label="Cerrar">‚úï</button>
            </header>

            <div class="ModalBody" id="ConfirmBody">¬øSeguro?</div>

            <footer class="ModalFooter">
                <button class="GhostBtn" id="ConfirmCancelBtn" type="button">Cancelar</button>
                <button class="DangerBtn" id="ConfirmOkBtn" type="button">Confirmar</button>
            </footer>
        </section>

        <!-- Fuente del SVG para construir el favicon con gradiente (oculto) -->
        <div id="faviconSource" class="uHidden" aria-hidden="true" style="display:none">
            <i data-lucide="calendar-range"></i>
        </div>

        <!-- Lucide (vanilla) -->
        <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js" defer></script>

        <!-- Tu app -->
        <script type="module" src="./js/App.js"></script>
    </body>
</html>